var topTenListsAngularApp=angular.module("topTenListsAngularApp",[]);topTenListsAngularApp.controller("main",["$scope","$window","$log",function(t,e,i){t.listItems=e.topTenListsGlobal.items||[],t.newListItem=function(){var e={title:"",image_url:"",image_id:""};t.listItems.push(e)},t.addImage=function(i){frame=e.wp.media({title:"Select or Upload an Image for List Item #"+(i+1),button:{text:"Use this image"},multiple:!1}),frame.on("select",function(){var e=frame.state().get("selection").first().toJSON();t.$apply(function(){t.listItems[i].image_url=e.url,t.listItems[i].image_id=e.id})}),frame.open()},t.removeItem=function(e){confirm("Are you sure you want to remove this item?")&&t.listItems.splice(e,1)},t.moveItemUp=function(e){t.listItems.splice(e-1,2,t.listItems[e],t.listItems[e-1])},t.moveItemDown=function(e){t.listItems.splice(e,2,t.listItems[e+1],t.listItems[e])}}]),topTenListsAngularApp.directive("ttlTextarea",["$window",function(t){return{restrict:"E",scope:{itemIndex:"=index",item:"=",items:"="},template:'<textarea data-ng-bind="item.content"></textarea>',link:function(e,i){e.$watchCollection("items",function(){var n=i.find("textarea");n.attr("name","top_ten_list["+e.itemIndex+"][content]");var m="top_ten_list_editor_"+e.itemIndex;n.attr("id")?(m=n.attr("id"),t.tinyMCE.execCommand("mceRemoveEditor",!1,m),t.tinyMCE.execCommand("mceAddEditor",!1,m)):(n.attr("id",m).attr("name","top_ten_list["+e.itemIndex+"][content]"),t.tinyMCE.execCommand("mceAddEditor",!1,m))})}}}]);